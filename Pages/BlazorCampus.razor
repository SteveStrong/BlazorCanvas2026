@page "/blazorcampus"
@using Microsoft.AspNetCore.Components
@using Blazor.Extensions
@using Blazor.Extensions.Canvas
@using Blazor.Extensions.Canvas.Canvas2D

<PageTitle>Blazor Campus</PageTitle>

<h1>Blazor Campus - Advanced Canvas Drawing</h1>
<p>This page demonstrates advanced canvas functionality using Blazor.Extensions.Canvas properly implemented to create a renderable campus scene.</p>

<div class="campus-layout">
    <div class="campus-canvas-container">
        <div class="blazor-campus-canvas-wrapper">
                        <BECanvas Width="800" Height="600" @ref="BECanvasReference" 
                     @onmousedown="OnCanvasMouseDown"
                     @onmousemove="OnCanvasMouseMove" 
                     @onmouseup="OnCanvasMouseUp"
                     style="border: 2px solid #333; border-radius: 8px; cursor: crosshair;">
            </BECanvas>
        </div>
    </div>

    <div class="campus-controls">
        <div class="control-section">
            <h5><i class="fas fa-palette"></i> Drawing Tools</h5>
            <div class="tool-group">
                <label class="tool-option @(_selectedTool == "brush" ? "active" : "")">
                    <input type="radio" name="tool" value="brush" @onchange="@(() => _selectedTool = "brush")" checked="@(_selectedTool == "brush")" />
                    <i class="fas fa-paint-brush"></i> Brush
                </label>
                <label class="tool-option @(_selectedTool == "rectangle" ? "active" : "")">
                    <input type="radio" name="tool" value="rectangle" @onchange="@(() => _selectedTool = "rectangle")" />
                    <i class="fas fa-square"></i> Rectangle
                </label>
                <label class="tool-option @(_selectedTool == "circle" ? "active" : "")">
                    <input type="radio" name="tool" value="circle" @onchange="@(() => _selectedTool = "circle")" />
                    <i class="fas fa-circle"></i> Circle
                </label>
                <label class="tool-option @(_selectedTool == "star" ? "active" : "")">
                    <input type="radio" name="tool" value="star" @onchange="@(() => _selectedTool = "star")" />
                    <i class="fas fa-star"></i> Star
                </label>
            </div>
        </div>

        <div class="control-section">
            <h5><i class="fas fa-cog"></i> Settings</h5>
            <div class="setting-group">
                <label>
                    <strong>Color:</strong>
                    <input type="color" @bind="_selectedColor" class="color-picker" />
                </label>
                <label>
                    <strong>Brush Size:</strong>
                    <input type="range" min="1" max="20" @bind="_brushSize" class="range-slider" />
                    <span class="value-display">@_brushSize</span>
                </label>
                <label class="checkbox-option" @onclick="async () => await ToggleGridClick()">
                    <input type="checkbox" checked="@_showGrid" />
                    <i class="fas fa-th"></i> Show Grid
                </label>
            </div>
        </div>

        <div class="control-section">
            <h5><i class="fas fa-magic"></i> Campus Scene</h5>
            <div class="action-group">
                <button class="btn btn-success" @onclick="CreateCampusScene">
                    <i class="fas fa-university"></i> Generate Campus
                </button>
                <button class="btn btn-danger" @onclick="ClearCanvas">
                    <i class="fas fa-trash"></i> Clear Canvas
                </button>
            </div>
        </div>

        <div class="control-section">
            <h5><i class="fas fa-info-circle"></i> Features</h5>
            <div class="feature-list">
                <div class="feature-item">
                    <i class="fas fa-mouse-pointer"></i>
                    <span>Interactive drawing with multiple tools</span>
                </div>
                <div class="feature-item">
                    <i class="fas fa-layer-group"></i>
                    <span>Layer-based rendering system</span>
                </div>
                <div class="feature-item">
                    <i class="fas fa-vector-square"></i>
                    <span>Vector-based shapes and paths</span>
                </div>
                <div class="feature-item">
                    <i class="fas fa-university"></i>
                    <span>Pre-built campus scene generator</span>
                </div>
            </div>
        </div>
    </div>
</div>